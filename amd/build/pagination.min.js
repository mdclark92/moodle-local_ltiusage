/**
 * @module local_ltiusage/pagination
 * @copyright 2025 Michael Clark <michael.d.clark@glasgow.ac.uk>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 **/
define("local_ltiusage/pagination",["jquery","core/ajax"],function($,ajax){return{init:function(){$(document).off("click.pagination").on("click.pagination",".pagination a",function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var link=$(this),url=link.attr("href"),tableContainer=link.closest(".lti-usage-table-group"),pageMatch=url.match(/page_(\d+)=(\d+)/),typeId=parseInt(pageMatch[1]),pageNum=parseInt(pageMatch[2]);return tableContainer.find("table").css("opacity","0.5"),ajax.call([{methodname:"local_ltiusage_get_pagination",args:{typeid:typeId,page:pageNum,perpage:25},done:function(response){var tbody=tableContainer.find("tbody");tbody.empty(),response.rows.forEach(function(row){var deleteCell=response.can_delete?'<td><a href="'+row.deletelink+'" onclick="return confirm(\'Are you sure you want to delete this LTI activity?\');">Delete</a></td>':"",tr="<tr><td>"+row.course+"</td><td>"+row.name+"</td><td>"+row.visible+'</td><td><a href="'+row.link+'">Open</a></td>'+deleteCell+"</tr>";tbody.append(tr)});var paginationDiv=tableContainer.find(".pagination");if(paginationDiv.length){var totalPages=Math.ceil(response.total/25),paginationHtml="";pageNum>0&&(paginationHtml+='<a href="'+url.replace(/page_\d+=\d+/,"page_"+typeId+"="+(pageNum-1))+'" class="btn btn-secondary">&lsaquo; Previous</a> '),paginationHtml+="Page "+(pageNum+1)+" of "+totalPages,pageNum<totalPages-1&&(paginationHtml+=' <a href="'+url.replace(/page_\d+=\d+/,"page_"+typeId+"="+(pageNum+1))+'" class="btn btn-secondary">Next &rsaquo;</a>'),paginationDiv.html(paginationHtml)}tableContainer.find("table").css("opacity","1"),setTimeout(function(){$(window).scrollTop(tableContainer.offset().top-20)},10)}}]),!1})}}});

//# sourceMappingURL=pagination.min.js.map